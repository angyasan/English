<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>単語帳（動詞・副詞）</title>
  <style>
    body { font-family: -apple-system, sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    h2 { text-align: center; }
    #tab-buttons { display: flex; justify-content: center; margin-bottom: 20px; }
    #tab-buttons button {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-bottom: 3px solid transparent;
      background-color: #f0f0f0;
      transition: border-color 0.3s;
    }
    #tab-buttons button.active {
      border-bottom: 3px solid #007bff;
      font-weight: bold;
      background-color: #e0eaff;
    }

    .entry {
      margin-bottom: 15px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 10px;
    }
    .jp {
      font-size: 16px;
      color: #444;
      margin-bottom: 6px;
    }
    .row {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .en {
      font-weight: bold;
      font-size: 18px;
      min-width: 100px;
    }
    .kana {
      color: #888;
      min-width: 80px;
    }
    button.play-btn {
      cursor: pointer;
      font-size: 18px;
      background: none;
      border: none;
      color: #007bff;
      padding: 0 8px;
      user-select: none;
      transition: color 0.3s;
    }
    button.play-btn:disabled {
      color: #ccc;
      cursor: default;
    }
  </style>
</head>
<body>

  <h2>📘 英単語帳（動詞・副詞）</h2>

  <div id="tab-buttons">
    <button id="btn-verbs" class="active">動詞</button>
    <button id="btn-adverbs">副詞</button>
  </div>

  <div id="list-verbs"></div>
  <div id="list-adverbs" style="display:none;"></div>

  <script>
    const verbsData = [
      ["なる", "be", "ビー"],
      ["持ってくる", "bring", "ブリング"],
      ["回す", "turn", "ターン"],
      ["増える", "increase", "インクリーズ"],
      ["減らす", "reduce", "リデュース"],
      ["決める", "decide", "ディサイド"],
      ["謝る", "apologize", "アポロジャイズ"],
    ];

    const adverbsData = [
      ["いつも", "always", "オールウェイズ"],
      ["よく", "often", "オーフン"],
      ["時々", "sometimes", "サムタイムズ"],
      ["たまに", "occasionally", "オケイジョナリー"],
      ["絶対に", "definitely", "デフィニットリー"],
      ["ゆっくりと", "slowly", "スローリー"],
      ["速く", "quickly", "クイックリー"],
      ["完全に", "completely", "コンプリートリー"],
    ];

    const btnVerbs = document.getElementById("btn-verbs");
    const btnAdverbs = document.getElementById("btn-adverbs");

    const listVerbs = document.getElementById("list-verbs");
    const listAdverbs = document.getElementById("list-adverbs");

    function getAudioUrl(word) {
      return "https://ssl.gstatic.com/dictionary/static/sounds/20200429/" + word.toLowerCase() + "--_us_1.mp3";
    }

    async function checkAudioExists(word) {
      const url = getAudioUrl(word);
      try {
        const response = await fetch(url, { method: "HEAD" });
        return response.ok;
      } catch {
        return false;
      }
    }

    async function createEntry(jp, en, kana) {
      const entry = document.createElement("div");
      entry.className = "entry";

      const jpDiv = document.createElement("div");
      jpDiv.className = "jp";
      jpDiv.textContent = jp;

      const rowDiv = document.createElement("div");
      rowDiv.className = "row";

      const enSpan = document.createElement("span");
      enSpan.className = "en";
      enSpan.textContent = en;

      const kanaSpan = document.createElement("span");
      kanaSpan.className = "kana";
      kanaSpan.textContent = kana;

      const btnPlay = document.createElement("button");
      btnPlay.className = "play-btn";
      btnPlay.textContent = "▶️";
      btnPlay.disabled = true;

      const exists = await checkAudioExists(en);
      if (exists) {
        btnPlay.disabled = false;
        btnPlay.onclick = () => {
          const audio = new Audio(getAudioUrl(en));
          audio.play();
        };
      } else {
        btnPlay.disabled = true;
        btnPlay.textContent = "❌";
        btnPlay.title = "音声なし";
      }

      rowDiv.appendChild(enSpan);
      rowDiv.appendChild(kanaSpan);
      rowDiv.appendChild(btnPlay);

      entry.appendChild(jpDiv);
      entry.appendChild(rowDiv);

      return entry;
    }

    async function renderList(listElem, data) {
      listElem.innerHTML = "";
      for (const [jp, en, kana] of data) {
        const entry = await createEntry(jp, en, kana);
        listElem.appendChild(entry);
      }
    }

    btnVerbs.addEventListener("click", async () => {
      btnVerbs.classList.add("active");
      btnAdverbs.classList.remove("active");
      listVerbs.style.display = "block";
      listAdverbs.style.display = "none";
      if (!listVerbs.hasChildNodes()) {
        await renderList(listVerbs, verbsData);
      }
    });

    btnAdverbs.addEventListener("click", async () => {
      btnAdverbs.classList.add("active");
      btnVerbs.classList.remove("active");
      listAdverbs.style.display = "block";
      listVerbs.style.display = "none";
      if (!listAdverbs.hasChildNodes()) {
        await renderList(listAdverbs, adverbsData);
      }
    });

    // 初期は動詞表示
    renderList(listVerbs, verbsData);

  </script>
</body>
</html>


