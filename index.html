<script>
  // 仮のデータ（これで最低限動くかチェック）
  const originalData = {
    verbs: [
      { jp: "食べる", en: "eat" },
      { jp: "走る", en: "run" }
    ]
  };

  const currentList = {
    verbs: [...originalData.verbs]
  };

  let currentType = "verbs";
  let quizList = [];
  let currentQuizIndex = 0;
  let quizDirection = "JtoE"; // または "EtoJ"

  function shuffleArray(arr) {
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function startQuiz(direction) {
    quizDirection = direction;
    quizList = shuffleArray([...currentList[currentType]]);
    currentQuizIndex = 0;
    showQuizQuestion();
    document.getElementById("quizContainer").style.display = "block";
  }

  function showQuizQuestion() {
    const item = quizList[currentQuizIndex];
    const firstTextDiv = document.getElementById("firstText");
    const secondTextDiv = document.getElementById("secondText");

    if (quizDirection === "JtoE") {
      firstTextDiv.textContent = item.jp;
      secondTextDiv.textContent = item.en;
    } else {
      firstTextDiv.textContent = item.en;
      secondTextDiv.textContent = item.jp;
    }

    secondTextDiv.classList.add("hidden");
    document.getElementById("showAnswerBtn").style.display = "inline-block";
    document.getElementById("nextBtn").style.display = "none";
  }

  document.getElementById("startQuizBtn").onclick = () => startQuiz("JtoE");
  document.getElementById("startQuizBtnReverse").onclick = () => startQuiz("EtoJ");

  document.getElementById("showAnswerBtn").onclick = () => {
    document.getElementById("secondText").classList.remove("hidden");
    document.getElementById("showAnswerBtn").style.display = "none";
    document.getElementById("nextBtn").style.display = "inline-block";
  };

  document.getElementById("nextBtn").onclick = () => {
    currentQuizIndex++;
    if (currentQuizIndex >= quizList.length) {
      alert("全問終了！");
      document.getElementById("quizContainer").style.display = "none";
    } else {
      showQuizQuestion();
    }
  };

  document.getElementById("quitQuizBtn").onclick = () => {
    document.getElementById("quizContainer").style.display = "none";
  };
</script>
