<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>単語帳</title>
<style>
  /* スタイルはそのまま */
  #quizOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 999;
  }
  #quizContainer {
    background: white;
    padding: 20px;
    border-radius: 8px;
    width: 90%;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }
  .quiz-jp, .quiz-en, .quiz-kana {
    margin-bottom: 10px;
  }
  .hidden { display: none !important; }
</style>
</head>
<body>

<h2>📘 単語帳</h2>

<div id="controls" class="control-buttons">
  <button class="control-btn" id="shuffleBtn">シャッフル</button>
  <button class="control-btn" id="resetBtn">元に戻す</button>
  <button id="startQuizJtoE" class="control-btn">J→Eクイズ</button>
  <button id="startQuizEtoJ" class="control-btn">E→Jクイズ</button>
</div>

<div id="content"></div>

<!-- クイズモーダル -->
<div id="quizOverlay">
  <div id="quizContainer">
    <div id="quizProgress" style="margin-bottom: 10px; font-size: 14px; color: #555;"></div>
    <div id="jpText" class="quiz-jp"></div>
    <div id="quizAnswerRow">
      <div id="enText" class="quiz-en"></div>
      <div id="kanaText" class="quiz-kana"></div>
    </div>
    <button id="showAnswerBtn">答えを見る</button>
    <button id="nextBtn" style="display:none;">次へ</button>
    <button id="quitQuizBtn">やめる</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const originalData = {
    verbs: [
      { jp: "〜である", en: "be", reading: "ビー" },
      { jp: "達成する", en: "achieve", reading: "アチーヴ" }
    ]
  };

  let currentType = "verbs"; // 初期タブ
  let quizMode = "JtoE"; // クイズモード
  let currentList = [...originalData[currentType]];

  const startQuizJtoE = document.getElementById("startQuizJtoE");
  const startQuizEtoJ = document.getElementById("startQuizEtoJ");
  const quizOverlay = document.getElementById("quizOverlay");
  const jpText = document.getElementById("jpText");
  const enText = document.getElementById("enText");
  const kanaText = document.getElementById("kanaText");
  const showAnswerBtn = document.getElementById("showAnswerBtn");
  const nextBtn = document.getElementById("nextBtn");
  const quitQuizBtn = document.getElementById("quitQuizBtn");

  let currentQuizIndex = 0;

  function startQuiz(mode) {
    quizMode = mode;
    currentQuizIndex = 0;
    showNextQuestion();
    quizOverlay.style.display = "flex";
  }

  function showNextQuestion() {
    const item = currentList[currentQuizIndex];
    if (quizMode === "JtoE") {
      jpText.textContent = item.jp;
      enText.textContent = item.en;
      kanaText.textContent = item.reading || "";
    } else if (quizMode === "EtoJ") {
      jpText.textContent = item.en; // 英語を表示
      enText.textContent = item.jp; // 日本語を解答用に
      kanaText.textContent = item.reading || "";
    }
    enText.style.display = "none";
    kanaText.style.display = "none";
    showAnswerBtn.style.display = "inline-block";
    nextBtn.style.display = "none";
  }

  showAnswerBtn.addEventListener("click", () => {
    enText.style.display = "block";
    kanaText.style.display = "block";
    showAnswerBtn.style.display = "none";
    nextBtn.style.display = "inline-block";
  });

  nextBtn.addEventListener("click", () => {
    currentQuizIndex++;
    if (currentQuizIndex < currentList.length) {
      showNextQuestion();
    } else {
      alert("クイズ終了!");
      quizOverlay.style.display = "none";
    }
  });

  quitQuizBtn.addEventListener("click", () => {
    quizOverlay.style.display = "none";
  });

  startQuizJtoE.addEventListener("click", () => startQuiz("JtoE"));
  startQuizEtoJ.addEventListener("click", () => startQuiz("EtoJ"));
});
</script>

</body>
</html>
